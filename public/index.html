<!DOCTYPE html>
<html>

<head>
  <title>Cloud Data Server</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, sans-serif;
    }
    .label {
      font-size: 9.45pt;
      font-weight: bold;
      color: #575E75;
      white-space: pre;
    }
    .var-outer {
      display: block;
      margin-bottom: 4px;
    }
    .var {
      flex-grow: 0;
      display: inline-block;
      background-color: #FF8C1A;
      border-radius: 15px;
      font-size: 8.1pt;
      color: white;
      font-weight: 500;
      padding-top: 7px;
      padding-bottom: 7px;
      padding-left: 8px;
      padding-right: 8px;
      text-decoration: none;
      white-space: pre;
    }
    .var::before {
      content: '‚òÅ ';
    }
    [hidden] {
      display: none !important;
    }
  </style>    
</head>

<body>
  <h1 class="label">Cloud Data Server</h1>
  <div class="var-outer"><a href="https://docs.turbowarp.org/cloud-variables#advanced" class="var">Important information for bot developers</a></div>
  <div class="var-outer"><a href="https://github.com/TurboWarp/cloud-server" class="var">Source code</a></div>
  <div class="var-outer" id="concurrents-outer"><a href="/api/stats" class="var" id="concurrents-inner">Loading statistics</a></div>

  <script>
    const concurrentsOuterEl = document.getElementById('concurrents-outer');
    const concurrentsInnerEl = document.getElementById('concurrents-inner');
    const updateStats = async () => {
      const response = await fetch('/api/stats');
      if (!response.ok) throw new Error(`HTTP ${response.status}`);
      const data = await response.json();
      concurrentsInnerEl.textContent = 'Concurrent connections: ' + data.concurrents;
    };
    updateStats();
  </script>
</body>

</html>
